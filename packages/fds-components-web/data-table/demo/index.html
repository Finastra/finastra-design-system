<script type="module" src="node_modules/@finastra/data-table/dist/src/data-table.js"></script>
<script type="module" src="node_modules/@finastra/data-table/dist/src/pagination/data-table-pagination.js"></script>
<script type="module" src="node_modules/@finastra/data-table/dist/src/data-table-with-pagination.js"></script>

<div class="main-content">
  <div>Default</div>

  <div class="card">
    <fds-data-table dense id="fds-data-table">
      <template id="fds-table-customized">
        <div style="width: fit-content">
          <span> {path} | {type} </span>
        </div>
      </template>
    </fds-data-table>
    <fds-data-table-pagination dense id="fds-data-table-pagination"></fds-data-table-pagination>
  </div>
  <div>
    <label id="fds-data-table-selected-rows"></label>
  </div>
  <div>Data table with pagination</div>
  <div class="card">
    <fds-data-table-with-pagination dense id="fds-data-table-with-pagination"></fds-data-table-with-pagination>
  </div>
</div>
<script>
  const ELEMENT_DATA = [
    {
      API: {
        text: 'Exchange Rates',
        link: 'https://design.fusionfabric.cloud'
      },
      'End Point': 'End point 1',
      'Date Time': '01-10-2019',
      'Day of Week': 'Monday',
      'Hour of Day': '16h-17h',
      'Status Code': '200',
      'Error Response': 'OK',
      'No. of Calls': 3,
      Revenue: {
        currency: '€',
        amount: 3
      },
      Status: {
        label: 'Approved'
      },
      'Confidence Score': 0.8,
      // _fdsTableRowStyle: 'background: red',
      apiDetail: {
        type: 'B2E',
        path: '/foo/bar/3'
      },
      _fdsSelected: true,
      _fdsSelectDisabled: true
    },
    {
      API: {
        text: 'Exchange Rates',
        link: 'https://design.fusionfabric.cloud'
      },
      'End Point': 'End point 2',
      'Date Time': '02-01-2019',
      'Day of Week': 'Monday',
      'Hour of Day': '16h-17h',
      'Status Code': '400',
      'Error Response': 'Bad Request',
      'No. of Calls': 2,
      Revenue: {
        currency: '€',
        amount: 2
      },
      Status: {
        label: 'Rejected'
      },
      'Confidence Score': '50%',
      apiDetail: {
        type: 'B2C',
        path: '/foo/bar/2'
      },
      _fdsSelectDisabled: true
    },
    {
      API: {
        text: 'Exchange Rates',
        link: 'https://design.fusionfabric.cloud'
      },
      'End Point': 'End point 3',
      'Date Time': '03-01-2019',
      'Day of Week': 'Monday',
      'Hour of Day': '17h-18h',
      'Status Code': '500',
      'Error Response': 'Server Error',
      'No. of Calls': 4,
      Revenue: {
        currency: '€',
        amount: 4
      },
      Status: {
        label: 'Denied'
      },
      'Confidence Score': 0,
      apiDetail: {
        type: 'B2C',
        path: '/foo/bar/1'
      }
    },
    {
      API: {
        text: 'Exchange Rates',
        link: 'https://design.fusionfabric.cloud'
      },
      'End Point': 'End point 4',
      'Date Time': '04-01-2019',
      'Day of Week': 'Monday',
      'Hour of Day': '17h-18h',
      'Status Code': '500',
      'Error Response': 'Bad Request',
      'No. of Calls': 7,
      Revenue: {
        currency: '€',
        amount: 5
      },
      Status: {
        label: 'Rejected'
      },
      'Confidence Score': 0.9,
      apiDetail: {
        type: 'B2C',
        path: '/foo/bar/1'
      }
    },
    {
      API: {
        text: 'Exchange Rates',
        link: 'https://design.fusionfabric.cloud'
      },
      'End Point': 'End point 5',
      'Date Time': '05-01-2019',
      'Day of Week': 'Monday',
      'Hour of Day': '18h-19h',
      'Status Code': '200',
      'Error Response': 'OK',
      'No. of Calls': 6,
      Revenue: {
        currency: '€',
        amount: 6
      },
      Status: {
        label: 'Rejected'
      },
      'Confidence Score': 1,
      apiDetail: {
        type: 'B2C',
        path: '/foo/bar/1'
      }
    },
    {
      API: {
        text: 'Exchange Rates',
        link: 'https://design.fusionfabric.cloud'
      },
      'End Point': 'End point 6',
      'Date Time': '06-01-2019',
      'Day of Week': 'Monday',
      'Hour of Day': '18h-19h',
      'Status Code': '400',
      'Error Response': 'OK',
      'No. of Calls': 8,
      Revenue: {
        currency: '€',
        amount: 5
      },
      Status: {
        label: 'Rejected'
      },
      'Confidence Score': 0.7,
      apiDetail: {
        type: 'B2C',
        path: '/foo/bar/1'
      }
    },
    {
      API: {
        text: 'Exchange Rates',
        link: 'https://design.fusionfabric.cloud'
      },
      'End Point': 'End point 7',
      'Date Time': '07-01-2019',
      'Day of Week': 'Monday',
      'Hour of Day': '16h-17h',
      'Status Code': '500',
      'Error Response': 'OK',
      'No. of Calls': 1,
      Revenue: {
        currency: '€',
        amount: 1
      },
      Status: {
        label: 'Rejected'
      },
      'Confidence Score': 0.3,
      apiDetail: {
        type: 'B2C',
        path: '/foo/bar/1'
      }
    },
    {
      API: {
        text: 'Exchange Rates',
        link: 'https://design.fusionfabric.cloud'
      },
      'End Point': 'End point 8',
      'Date Time': '08-01-2019',
      'Day of Week': 'Monday',
      'Hour of Day': '16h-17h',
      'Status Code': '200',
      'Error Response': 'OK',
      'No. of Calls': 3,
      Revenue: {
        currency: '€',
        amount: 6
      },
      Status: {
        label: 'Rejected'
      },
      'Confidence Score': 0.8,
      apiDetail: {
        type: 'B2C',
        path: '/foo/bar/1'
      }
    },
    {
      API: {
        text: 'Exchange Rates',
        link: 'https://design.fusionfabric.cloud'
      },
      'End Point': 'End point 9',
      'Date Time': '09-01-2019',
      'Day of Week': 'Monday',
      'Hour of Day': '16h-17h',
      'Status Code': '200',
      'Error Response': 'OK',
      'No. of Calls': 3,
      Revenue: {
        currency: '€',
        amount: 7
      },
      Status: {
        label: 'Denied'
      },
      'Confidence Score': 0.8,
      apiDetail: {
        type: 'B2C',
        path: '/foo/bar/1'
      }
    },
    {
      API: {
        text: 'Exchange Rates',
        link: 'https://design.fusionfabric.cloud'
      },
      'End Point': 'End point 10',
      'Date Time': '10-01-2019',
      'Day of Week': 'Monday',
      'Hour of Day': '16h-17h',
      'Status Code': '200',
      'Error Response': 'OK',
      'No. of Calls': 3,
      Revenue: {
        currency: '€',
        amount: 9
      },
      Status: {
        label: 'Rejected'
      },
      'Confidence Score': 0.8,
      apiDetail: {
        type: 'B2C',
        path: '/foo/bar/1'
      }
    },
    {
      API: {
        text: 'Exchange Rates',
        link: 'https://design.fusionfabric.cloud'
      },
      'End Point': 'End point 11',
      'Date Time': '11-01-2019',
      'Day of Week': 'Monday',
      'Hour of Day': '16h-17h',
      'Status Code': '200',
      'Error Response': 'OK',
      'No. of Calls': 3,
      Revenue: {
        currency: '€',
        amount: 3
      },
      Status: {
        label: 'Approved'
      },
      'Confidence Score': 0.8,
      apiDetail: {
        type: 'B2C',
        path: '/foo/bar/1'
      }
    }
  ];

  const columns = [
    { id: 'API', name: 'API', type: 'link', align: 'left', displayName: 'Display Api' },
    { id: 'End Point', name: 'End Point', type: 'string', align: 'left', sortable: true, _style: 'font-weight: bold' },
    { id: 'Hour of Day', name: 'Hour of Day', type: 'date', align: 'left' },
    { id: 'Status Code', name: 'Status Code', type: 'string', align: 'left' },
    { id: 'Error Response', name: 'Error Response', type: 'string', align: 'center' },
    { id: 'No. of Calls', name: 'No. of Calls', type: 'number', align: 'right', sortable: true },
    { id: 'Revenue', name: 'Revenue', type: 'type_double', align: 'right' },
    { id: 'Status', name: 'Status', type: 'chip', align: 'center' },
    { id: 'Confidence Score', name: 'Confidence Score', type: 'linear_progress', align: 'center' },
    { id: 'apiDetail', name: 'Api Detail', type: 'cell_template', align: 'center', cellTemplateId: 'fds-table-customized' }
  ];

  const dataTable = document.querySelector('#fds-data-table');

  dataTable.dataSource = ELEMENT_DATA.slice(0, 5);
  dataTable.columns = columns;
  dataTable.columnsToDisplay = [
    'API',
    'End Point',
    'Hour of Day',
    'Status Code',
    'Error Response',
    'No. of Calls',
    'Revenue',
    'Status',
    'Confidence Score',
    'apiDetail'
  ];
  dataTable.selectable = true;
  // dataTable.multiSelect = false;
  // dataTable.showSingleSelectRadioBox = true;
  dataTable.multiSelect = true;
  dataTable.showMultiSelectCheckBox = true;

  dataTable.addEventListener('onFdsDataTableRowSelected', (e) => {
    console.log('data from table without pagination');
    console.log(e.detail);
    document.querySelector('#fds-data-table-selected-rows').innerHTML = JSON.stringify(e.detail, null, 2);
  });

  const dataTablePagination = document.querySelector('#fds-data-table-pagination');
  dataTablePagination.length = ELEMENT_DATA.length;
  dataTablePagination.pageIndex = 0;
  dataTablePagination.pageSize = 5;
  dataTablePagination.pageSizeOptions = [5, 10, 20];
  dataTablePagination.showFirstLastButtons = true;
  dataTablePagination.addEventListener('onFdsPaginationChanged', (e) => {
    dataTable.dataSource = ELEMENT_DATA.slice(e.detail.pageIndex * e.detail.pageSize, (e.detail.pageIndex + 1) * e.detail.pageSize);
  });

  const dataTableWithPagination = document.querySelector('#fds-data-table-with-pagination');
  dataTableWithPagination.dataSource = ELEMENT_DATA;
  dataTableWithPagination.columns = columns;
  dataTableWithPagination.columnsToDisplay = [
    'API',
    'End Point',
    'Hour of Day',
    'Status Code',
    'Error Response',
    'No. of Calls',
    'Revenue',
    'Status',
    'Confidence Score',
    'apiDetail'
  ];
  dataTableWithPagination.selectable = true;
  dataTableWithPagination.multiSelect = true;
  dataTableWithPagination.recordSelectionCrossPages = true;
  // dataTableWithPagination.showSingleSelectRadioBox = true;
  dataTableWithPagination.showMultiSelectCheckBox = true;
  dataTableWithPagination.pageSizeOptions = [5, 10, 20];
  dataTableWithPagination.showFirstLastButtons = true;
  dataTableWithPagination.addEventListener('onFdsDataTableWithPaginationRowSelected', (e) => {
    console.log('data from table with pagination');
    console.log(e.detail);
  });
</script>
<style>
  main-content {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }

  .card {
    background-color: #fff;
    padding: 40px;
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    place-content: flex-end flex-start;
    align-items: flex-end;
    width: 1000px;
  }

  .card fds-data-table {
    width: 100%;
    --fds-data-table-max-height: none;
  }

  .card fds-data-table-pagination {
    padding-top: 8px;
  }

  .card fds-data-table-with-pagination {
    width: 100%;
    --fds-data-table-max-height: 390px;
  }
</style>
