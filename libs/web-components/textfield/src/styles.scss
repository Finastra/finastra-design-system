@use "sass:color";
@use "@material/mwc-textfield/mwc-textfield";
@use "@finastra/fds-theme" as fds;

$textfield-icon-color: var(--fds-primary, #694ed6);
$textfield-icon-trailing-color: var(--fds-on-surface-medium, color.change(#000, $alpha: 0.54),);

:host {
  padding-top: 30px;
  display: block;
  @include fds.mdc(theme-primary, primary);
  @include fds.mdc(theme-error, error);
  @include fds.mdc(text-field-outlined-idle-border-color, outline);
  @include fds.mdc(text-field-outlined-hover-border-color, on-surface);
  @include fds.mdc(text-field-outlined-disabled-border-color, outline);
  @include fds.mdc(text-field-ink-color, on-surface);
  @include fds.mdc(text-field-label-ink-color, on-surface-medium);
  @include fds.mdc(text-field-disabled-ink-color, on-surface-disabled);

  .fds-text-field__label {
    display: block;
    @include fds.text-color(on-surface-medium);
    @include fds.typography(body-2);
    @include fds.margin(2, bottom);
  }

  .mdc-text-field--outlined {
    @include fds.bg-color(surface);
    height: 48px;
  }

  .mdc-text-field__input {
    @include fds.typography(subtitle-2);
    
    &::placeholder {
      @include fds.typography(body-2);
    }
  }

  .mdc-text-field:not(.fds-text-field--label-inside) {
    .mdc-text-field__input::placeholder {
      opacity: 1 !important;
    }
  }

  .mdc-text-field--disabled {
    @include fds.bg-color(surface-disabled);
  }

  .mdc-text-field.mdc-text-field--focused .mdc-notched-outline {
    --mdc-notched-outline-stroke-width: 1px !important;
  }
}

:host([dense]) {
  --mdc-icon-size: 18px;

  .mdc-text-field--outlined {
    height: 40px;
  }
  
  .mdc-text-field__input {
    @include fds.typography(subtitle-3);
  }

  .fds-text-field__label {
    @include fds.typography(body-3);
  }
}

slot[name="actionButton"]::slotted(*) {
  @include fds.text-color(on-surface-medium);
  margin-right: -14px;
  align-self: center;
}

.mdc-text-field:not(.mdc-text-field--disabled) .mdc-text-field__icon--leading {
  color: var(--fds-icon-color, $textfield-icon-color);
}

.mdc-text-field:not(.mdc-text-field--disabled) .mdc-text-field__icon--trailing {
  color: var(--fds-icon-trailing-color, $textfield-icon-trailing-color);
}

.mdc-text-field--disabled .mdc-text-field__icon {
  color: var(--fds-on-surface-disabled);
}